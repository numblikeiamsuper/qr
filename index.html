<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>One-Time Redirect Link Generator</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 600px; margin: auto; }
    input, button, textarea { width: 100%; margin: 0.5em 0; padding: 0.5em; }
    textarea { height: 200px; }
    .used { text-decoration: line-through; color: gray; }
  </style>
</head>
<body>
  <h1>ðŸ”— One-Time Redirect Generator</h1>
  <input type="text" id="destination" placeholder="Enter destination URL" />
  <button onclick="generateLinks()">Generate 30 Links</button>
  <textarea id="output" readonly></textarea>
  <ul id="linkList"></ul>

  <script>
    const apiKey = "pk_cknSzy2t9eCc2JHi";
    const domain = "0.qwe1.gleeze.com";
    const output = document.getElementById("output");
    const linkList = document.getElementById("linkList");

    async function generateLinks() {
      const destination = document.getElementById("destination").value;
      if (!destination) return alert("Please enter a destination URL");

      output.value = "Generating links...\n";
      linkList.innerHTML = "";

      for (let i = 0; i < 30; i++) {
        const uniquePath = `one-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;
        const shortLink = `https://${domain}/${uniquePath}`;

        const res = await fetch("https://api.short.io/links", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": apiKey
          },
          body: JSON.stringify({
            domain,
            originalURL: destination,
            path: uniquePath
          })
        });

        const data = await res.json();
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = data.shortURL;
        a.textContent = data.shortURL;
        a.target = "_blank";
        a.onclick = function () {
          a.classList.add("used");
          a.onclick = () => false;
        };
        li.appendChild(a);
        linkList.appendChild(li);
        output.value += `${data.shortURL}\n`;
      }
    }
  </script>
</body>
</html>
